# 训练数据集说明 (train1 和 train2)

## 数据集概览

### 基本信息

| 数据集 | 样本数 | 数据大小 | 占比 |
|--------|--------|---------|------|
| **train1** | 14,573 | ~84 MB | 84% |
| **train2** | 2,794 | ~19 MB | 16% |
| **总计** | **17,367** | ~103 MB | 100% |

## train1 和 train2 的关系

### 在代码中的使用方式

从 `interfaces/base.py` 的 `get_train_data()` 方法可以看到：

```python
train_data_dir: [
    './dataset/mydata/train1',
    './dataset/mydata/train2',
]
```

**关键点**：
1. **合并使用**: train1 和 train2 会被合并成一个完整的训练数据集
2. **ConcatDataset**: 使用 `torch.utils.data.ConcatDataset` 将两个数据集连接
3. **统一处理**: 训练时会从合并后的数据集中随机采样，不区分来源

### 数据加载流程

```
train1 (14,573样本) ──┐
                      ├──> ConcatDataset ──> DataLoader ──> 训练
train2 (2,794样本)  ──┘
```

## 可能的区别（基于TextZoom数据集）

虽然代码中没有明确说明 train1 和 train2 的具体区别，但根据 TextZoom 数据集的常见组织方式和您的数据规模，可能的区别包括：

### 1. 数据来源不同

- **train1**: 可能来自某个特定的数据源或场景
- **train2**: 可能来自另一个数据源或场景
- **目的**: 增加数据多样性，提高模型泛化能力

### 2. 数据难度分布

- **train1**: 可能包含更多"简单"或"中等"难度的样本
- **train2**: 可能包含更多"困难"难度的样本
- **目的**: 平衡训练数据的难度分布

### 3. 数据采集时间/版本

- **train1**: 可能是主要训练集
- **train2**: 可能是补充数据集或后续添加的数据
- **目的**: 逐步扩充训练数据

### 4. 场景类型

- **train1**: 可能包含特定场景的文本图像（如街景、招牌等）
- **train2**: 可能包含其他场景的文本图像
- **目的**: 覆盖更多实际应用场景

## 实际使用建议

### 训练时

**两个数据集都会被使用**，无需特别区分：

```yaml
# config/super_resolution.yaml
train_data_dir: [
    './dataset/mydata/train1',  # 14,573 样本
    './dataset/mydata/train2',  # 2,794 样本
]
```

训练时，模型会从合并后的 17,367 个样本中随机采样。

### 如果只想使用其中一个

如果需要只使用 train1 或 train2，可以修改配置文件：

```yaml
# 只使用 train1
train_data_dir: [
    './dataset/mydata/train1',
]

# 或只使用 train2
train_data_dir: [
    './dataset/mydata/train2',
]
```

**注意**: 不推荐只使用 train2，因为样本数太少（2,794），可能影响训练效果。

## 数据格式

两个数据集都使用 **LMDB 格式**，包含：

- **高分辨率图像** (HR): 128×32 像素
- **低分辨率图像** (LR): 64×16 像素  
- **文本标签**: 对应的文本内容

## 数据质量

### train1 (主要数据集)
- **样本数**: 14,573
- **数据量**: 84 MB
- **特点**: 数据量大，是训练的主要数据源

### train2 (补充数据集)
- **样本数**: 2,794
- **数据量**: 19 MB
- **特点**: 数据量较小，可能是补充或特定场景的数据

## 训练影响

### 使用两个数据集的好处

1. **数据多样性**: 增加训练数据的多样性
2. **更好的泛化**: 模型能学习到更多不同的文本样式和场景
3. **数据量**: 总样本数达到 17,367，足够进行有效训练

### 训练时的采样

训练时，DataLoader 会：
- 从合并后的数据集中**随机采样**
- 每个 epoch 都会遍历所有 17,367 个样本
- 不区分样本来自 train1 还是 train2

## 验证数据集

与训练集不同，测试集按难度分为：
- `test/easy/` - 简单难度
- `test/medium/` - 中等难度
- `test/hard/` - 困难难度

这样可以评估模型在不同难度下的表现。

## 总结

1. **train1 和 train2 会被合并使用**，训练时无需区分
2. **train1 是主要数据集**（84%的样本）
3. **train2 是补充数据集**（16%的样本）
4. **合并后总样本数**: 17,367，足够进行训练
5. **具体区别**: 代码中未明确说明，可能是数据来源、难度或场景的不同

## 检查数据集

可以使用以下命令检查数据集信息：

```bash
source .venv37/bin/activate
python check_dataset.py
```

输出示例：
```
train1: 14,573 样本
train2: 2,794 样本
总计: 17,367 样本
```

